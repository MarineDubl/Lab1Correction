<!DOCTYPE html>
<html lang="en">
<head>
  <title>Price Calculator</title>
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="./output.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>  
</head>
<body>

<section class="text-gray-600 body-font">
  <div class="container mx-auto flex px-5 py-24 md:flex-row flex-col items-center">
    <div class="lg:flex-grow md:w-1/2 lg:pr-24 md:pr-16 flex flex-col md:items-start md:text-left mb-16 md:mb-0 items-center text-center">
      <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900">How much to charge?</h1>
      <p class="mb-8 leading-relaxed">If you were a freelance web designer, how much should you charge for a website? Fill out the form and find out!</p>
      <div>
        <form id="budget" action="javascript:calculatePrice()">
          <label for="salary" class="leading-7 text-sm text-gray-600">What annual salary seems suitable for you?</label>
          <input type="text" id="salary" name="salary" class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"/><br><br>
          <label for="days" class="leading-7 text-sm text-gray-600">How many days do you think it will take you to make the website?</label>
          <input type="text" id="days" name="days" class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"/><br><br>
          <input type="submit" value="Calculate your price!" class="text-white bg-purple-600 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg"><br><br>
          <label id="finalPrice"> ??? </label>
        </form>
      </div>
    </div>
    <div class="lg:max-w-lg lg:w-full md:w-1/2 w-5/6">
      <img src="../img/images.jpg" alt="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH">
    </div>
  </div>
</section>

<script>
  /* function calculatePrice() {
    var s = document.getElementById("salary").value;
    var d = document.getElementById("days").value;
    console.log("Calculating price")
    console.log(s)
    console.log(d)
    let finalPrice = 0;
    dailyRate = s/365;
    price = Math.round(dailyRate * d);
    var roundToNearest = 50;
    roundedPrice = Math.round((price+roundToNearest)/roundToNearest) * roundToNearest // Always round up
    document.getElementById("finalPrice").innerHTML = "Â£" + roundedPrice;
  }
  */
  // handling the submit button through the API
  $('#submit').click(handleClick);

  function handleClick() {
    var salary = $('#salary').val();
    var days = $('#days').val();

    var url = "/api/getPrice?"+"salary="+salary+"&days="+days;
    console.log(url)

    $.ajax(
      {url: url,
      success: function(finalPrice){
        $("#finalPrice").html(finalPrice);
      }
    });
    return false;
  }


  </script>

</body>
</html>
